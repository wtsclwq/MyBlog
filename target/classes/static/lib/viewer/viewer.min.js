/*!
 * Viewer.js v0.3.1
 * https://github.com/fengyuanchen/viewerjs
 *
 * Copyright (c) 2015-2016 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2016-02-02T11:35:52.542Z
 */
!function(b,a){"object"==typeof module&&"object"==typeof module.exports?module.exports=b.document?a(b,!0):function(c){if(!c.document){throw new Error("Viewer requires a window with a document")}return a(c)}:a(b)}("undefined"!=typeof window?window:this,function(aO,av){function aJ(a){return bE.call(a).slice(8,-1).toLowerCase()}function aC(a){return"string"==typeof a}function aU(a){return"number"==typeof a&&!isNaN(a)}function aB(a){return"undefined"==typeof a}function ax(a){return"object"==typeof a&&null!==a}function aw(c){var b,a;if(!ax(c)){return !1}try{return b=c.constructor,a=b.prototype,b&&a&&bc.call(a,"isPrototypeOf")}catch(d){return !1}}function aG(a){return"function"===aJ(a)}function au(a){return Array.isArray?Array.isArray(a):"array"===aJ(a)}function aQ(b,a){return a=a>=0?a:0,Array.from?Array.from(b).slice(a):ab.call(b,a)}function aP(c,b){var a=-1;return b.indexOf?b.indexOf(c):(aN(b,function(d,e){return d===c?(a=e,!1):void 0}),a)}function aD(a){return aC(a)&&(a=a.trim?a.trim():a.replace(ag,"1")),a}function aN(c,b){var a,d;if(c&&aG(b)){if(au(c)||aU(c.length)){for(d=0,a=c.length;a>d&&b.call(c,c[d],d,c)!==!1;d++){}}else{if(ax(c)){for(d in c){if(c.hasOwnProperty(d)&&b.call(c,c[d],d,c)===!1){break}}}}}return c}function aK(b){var a;if(arguments.length>1){if(a=aQ(arguments),Object.assign){return Object.assign.apply(Object,a)}a.shift(),aN(a,function(c){aN(c,function(e,d){b[d]=e})})}return b}function at(c,b){var a=aQ(arguments,2);return function(){return c.apply(b,a.concat(aQ(arguments)))}}function aM(c,b){var a=c.style;aN(b,function(f,d){bk.test(d)&&aU(f)&&(f+="px"),a[d]=f})}function ar(a){return aO.getComputedStyle?aO.getComputedStyle(a,null):a.currentStyle}function aA(b,a){return b.classList?b.classList.contains(a):b.className.indexOf(a)>-1}function aT(c,b){var a;if(b){if(aU(c.length)){return aN(c,function(d){aT(d,b)})}if(c.classList){return c.classList.add(b)}a=aD(c.className),a?a.indexOf(b)<0&&(c.className=a+" "+b):c.className=b}}function ap(b,a){return a?aU(b.length)?aN(b,function(c){ap(c,a)}):b.classList?b.classList.remove(a):void (b.className.indexOf(a)>=0&&(b.className=b.className.replace(a,""))):void 0}function aq(c,b,a){return aU(c.length)?aN(c,function(d){aq(d,b,a)}):void (a?aT(c,b):ap(c,b))}function ao(b,a){return ax(b[a])?b[a]:b.dataset?b.dataset[a]:b.getAttribute("data-"+a)}function bp(c,b,a){ax(a)&&aB(c[b])?c[b]=a:c.dataset?c.dataset[b]=a:c.setAttribute("data-"+b,a)}function bo(b,a){ax(b[a])?delete b[a]:b.dataset?delete b.dataset[a]:b.removeAttribute("data-"+a)}function aH(f,d,c,h){var b=aD(d).split(bC),g=c;return b.length>1?aN(b,function(a){aH(f,a,c)}):(h&&(c=function(){return bi(f,d,c),g.apply(f,arguments)}),void (f.addEventListener?f.addEventListener(d,c,!1):f.attachEvent&&f.attachEvent("on"+d,c)))}function bi(c,b,a){var d=aD(b).split(bC);return d.length>1?aN(d,function(e){bi(c,e,a)}):void (c.removeEventListener?c.removeEventListener(b,a,!1):c.detachEvent&&c.detachEvent("on"+b,a))}function bf(c,b){var a;return c.dispatchEvent?(aG(bl)?a=new bl(b,{bubbles:!0,cancelable:!0}):(a=a0.createEvent("Event"),a.initEvent(b,!0,!0)),c.dispatchEvent(a)):c.fireEvent?c.fireEvent("on"+b):void 0}function a3(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function aY(b){var a,c=b||aO.event;return c.target||(c.target=c.srcElement||a0),aU(c.pageX)||(a=a0.documentElement,c.pageX=c.clientX+(aO.scrollX||a&&a.scrollLeft||0)-(a&&a.clientLeft||0),c.pageY=c.clientY+(aO.scrollY||a&&a.scrollTop||0)-(a&&a.clientTop||0)),c}function bn(b){var a=a0.documentElement,c=b.getBoundingClientRect();return{left:c.left+(aO.scrollX||a&&a.scrollLeft||0)-(a&&a.clientLeft||0),top:c.top+(aO.scrollY||a&&a.scrollTop||0)-(a&&a.clientTop||0)}}function aZ(c){var b=c.length,a=0,d=0;return b&&(aN(c,function(f){a+=f.pageX,d+=f.pageY}),a/=b,d/=b),{pageX:a,pageY:d}}function a5(b,a){return b.getElementsByTagName(a)}function a1(b,a){return b.getElementsByClassName?b.getElementsByClassName(a):b.querySelectorAll("."+a)}function bb(b,a){return a.length?aN(a,function(c){bb(b,c)}):void b.appendChild(a)}function a8(a){a.parentNode&&a.parentNode.removeChild(a)}function bt(a){for(;a.firstChild;){a.removeChild(a.firstChild)}}function br(b,a){aB(b.textContent)?b.innerText=a:b.textContent=a}function aV(a){return a.offsetWidth}function a6(a){return aC(a)?a.replace(/^.*\//,"").replace(/[\?&#].*$/,""):""}function az(c,b){var a;return c.naturalWidth?b(c.naturalWidth,c.naturalHeight):(a=a0.createElement("img"),a.onload=function(){b(this.width,this.height)},void (a.src=c.src))}function bd(c){var b=[],a=c.rotate,f=c.scaleX,d=c.scaleY;return aU(a)&&b.push("rotate("+a+"deg)"),aU(f)&&aU(d)&&b.push("scale("+f+","+d+")"),b.length?b.join(" "):"none"}function bs(a){switch(a){case 2:return bm;case 3:return bh;case 4:return a7}}function a9(c,b){var a=this;a.element=c,a.options=aK({},a9.DEFAULTS,aw(b)&&b),a.isImg=!1,a.isBuilt=!1,a.isShown=!1,a.isViewed=!1,a.isFulled=!1,a.isPlayed=!1,a.wheeling=!1,a.playing=!1,a.fading=!1,a.tooltiping=!1,a.transitioning=!1,a.action=!1,a.target=!1,a.timeout=!1,a.index=0,a.length=0,a.init()
}var a0=aO.document,bl=aO.Event,aI="viewer",a2=aI+"-fixed",aX=aI+"-open",bg=aI+"-show",bA=aI+"-hide",bm="viewer-hide-xs-down",bh="viewer-hide-sm-down",a7="viewer-hide-md-down",ac=aI+"-fade",bq=aI+"-in",aE=aI+"-move",bj=aI+"-active",bv=aI+"-invisible",aL=aI+"-transition",bG=aI+"-fullscreen",by=aI+"-fullscreen-exit",bF=aI+"-close",aR="mousedown touchstart pointerdown MSPointerDown",ay="mousemove touchmove pointermove MSPointerMove",ak="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",bx="wheel mousewheel DOMMouseScroll",bD="transitionend",ba="load",an="keydown",bw="click",ah="resize",am="build",a4="built",bB="show",bH="shown",bu="hide",aF="hidden",al="view",ad="viewed",bk=/width|height|left|top|marginLeft|marginTop/,ag=/^\s+(.*)\s+$/,bC=/\s+/,aa="undefined"!=typeof a0.createElement(aI).style.transition,af=Math.min,aj=Math.max,bI=Math.abs,aW=Math.sqrt,bz=Math.round,aS=Object.prototype,bE=aS.toString,bc=aS.hasOwnProperty,ab=Array.prototype.slice;a9.prototype={constructor:a9,init:function(){var g=this,d=g.options,c=g.element,j="img"===c.tagName.toLowerCase(),b=j?[c]:a5(c,"img"),h=b.length,f=at(g.ready,g);ao(c,aI)||(bp(c,aI,g),h&&(aG(d.build)&&aH(c,am,d.build,!0),bf(c,am)!==!1&&(aa||(d.transition=!1),g.isImg=j,g.length=h,g.count=0,g.images=b,g.body=a0.body,d.inline?(aH(c,a4,function(){g.view()},!0),aN(b,function(a){a.complete?f():aH(a,ba,f,!0)})):aH(c,bw,g._start=at(g.start,g)))))},ready:function(){var a=this;a.count++,a.count===a.length&&a.build()},build:function(){var j,q,h,g,m,f,b,v,p=this,l=p.options,k=p.element;p.isBuilt||(j=a0.createElement("div"),j.innerHTML=a9.TEMPLATE,p.parent=q=k.parentNode,p.viewer=h=a1(j,"viewer-container")[0],p.canvas=a1(h,"viewer-canvas")[0],p.footer=a1(h,"viewer-footer")[0],p.title=b=a1(h,"viewer-title")[0],p.toolbar=m=a1(h,"viewer-toolbar")[0],p.navbar=f=a1(h,"viewer-navbar")[0],p.button=g=a1(h,"viewer-button")[0],p.tooltipBox=a1(h,"viewer-tooltip")[0],p.player=a1(h,"viewer-player")[0],p.list=a1(h,"viewer-list")[0],aT(b,l.title?bs(l.title):bA),aT(m,l.toolbar?bs(l.toolbar):bA),aT(f,l.navbar?bs(l.navbar):bA),aq(g,bA,!l.button),aq(m.querySelectorAll("li[class*=zoom]"),bv,!l.zoomable),aq(m.querySelectorAll("li[class*=flip]"),bv,!l.scalable),l.rotatable||(v=m.querySelectorAll("li[class*=rotate]"),aT(v,bv),bb(m,v)),l.inline?(aT(g,bG),aM(h,{zIndex:l.zIndexInline}),"static"===ar(q).position&&aM(q,{position:"relative"})):(aT(g,bF),aT(h,a2),aT(h,ac),aT(h,bA),aM(h,{zIndex:l.zIndex})),q.insertBefore(h,k.nextSibling),l.inline&&(p.render(),p.bind(),p.isShown=!0),p.isBuilt=!0,aG(l.built)&&aH(k,a4,l.built,!0),bf(k,a4))},unbuild:function(){var a=this;a.isBuilt&&(a.isBuilt=!1,a8(a.viewer))},bind:function(){var d=this,c=d.options,e=d.element,b=d.viewer;aG(c.view)&&aH(e,al,c.view),aG(c.viewed)&&aH(e,ad,c.viewed),aH(b,bw,d._click=at(d.click,d)),aH(b,bx,d._wheel=at(d.wheel,d)),aH(d.canvas,aR,d._mousedown=at(d.mousedown,d)),aH(a0,ay,d._mousemove=at(d.mousemove,d)),aH(a0,ak,d._mouseup=at(d.mouseup,d)),aH(a0,an,d._keydown=at(d.keydown,d)),aH(aO,ah,d._resize=at(d.resize,d))},unbind:function(){var d=this,c=d.options,e=d.element,b=d.viewer;aG(c.view)&&bi(e,al,c.view),aG(c.viewed)&&bi(e,ad,c.viewed),bi(b,bw,d._click),bi(b,bx,d._wheel),bi(d.canvas,aR,d._mousedown),bi(a0,ay,d._mousemove),bi(a0,ak,d._mouseup),bi(a0,an,d._keydown),bi(aO,ah,d._resize)},render:function(){var a=this;a.initContainer(),a.initViewer(),a.initList(),a.renderViewer()},initContainer:function(){var a=this;a.containerData={width:aO.innerWidth,height:aO.innerHeight}},initViewer:function(){var c,b=this,a=b.options,d=b.parent;a.inline&&(b.parentData=c={width:aj(d.offsetWidth,a.minWidth),height:aj(d.offsetHeight,a.minHeight)}),(b.isFulled||!c)&&(c=b.containerData),b.viewerData=aK({},c)},renderViewer:function(){var a=this;a.options.inline&&!a.isFulled&&aM(a.viewer,a.viewerData)},initList:function(){var f=this,d=f.options,c=f.element,b=f.list,g=[];aN(f.images,function(e,j){var i=e.src,h=e.alt||a6(i),k=d.url;i&&(aC(k)?k=e.getAttribute(k):aG(k)&&(k=k.call(c,f)),g.push('<li><img src="'+i+'" data-action="view" data-index="'+j+'" data-original-url="'+(k||i)+'" alt="'+h+'"></li>'))}),b.innerHTML=g.join(""),aN(a5(b,"img"),function(a){bp(a,"filled",!0),aH(a,ba,at(f.loadImage,f),!0)}),f.items=a5(b,"li"),d.transition&&aH(c,ad,function(){aT(b,aL)},!0)},renderList:function(f){var d=this,c=f||d.index,g=d.items[c].offsetWidth||30,b=g+1;aM(d.list,{width:b*d.length,marginLeft:(d.viewerData.width-g)/2-b*c})},resetList:function(){var a=this;bt(a.list),ap(a.list,aL),aM({marginLeft:0})},initImage:function(g){var k=this,f=k.options,d=k.image,h=k.viewerData,c=k.footer.offsetHeight,b=h.width,l=aj(h.height-c,c),j=k.imageData||{};az(d,function(t,i){var r,s,q=t/i,e=b,p=l;l*q>b?p=b/q:e=l*q,e=af(0.9*e,t),p=af(0.9*p,i),s={naturalWidth:t,naturalHeight:i,aspectRatio:q,ratio:e/t,width:e,height:p,left:(b-e)/2,top:(l-p)/2},r=aK({},s),f.rotatable&&(s.rotate=j.rotate||0,r.rotate=0),f.scalable&&(s.scaleX=j.scaleX||1,s.scaleY=j.scaleY||1,r.scaleX=1,r.scaleY=1),k.imageData=s,k.initialImageData=r,aG(g)&&g()
})},renderImage:function(f){var d=this,c=d.image,g=d.imageData,b=bd(g);aM(c,{width:g.width,height:g.height,marginLeft:g.left,marginTop:g.top,WebkitTransform:b,msTransform:b,transform:b}),aG(f)&&(d.transitioning?aH(c,bD,f,!0):f())},resetImage:function(){var a=this;a.image&&(a8(a.image),a.image=null)},start:function(c){var b=this,a=aY(c),d=a.target;"img"===d.tagName.toLowerCase()&&(b.target=d,b.show())},click:function(f){var d=this,c=aY(f),h=c.target,b=ao(h,"action"),g=d.imageData;switch(b){case"mix":d.isPlayed?d.stop():d.options.inline?d.isFulled?d.exit():d.full():d.hide();break;case"view":d.view(ao(h,"static.html.admin.index"));break;case"zoom-in":d.zoom(0.1,!0);break;case"zoom-out":d.zoom(-0.1,!0);break;case"one-to-one":d.toggle();break;case"reset":d.reset();break;case"prev":d.prev();break;case"play":d.play();break;case"next":d.next();break;case"rotate-left":d.rotate(-90);break;case"rotate-right":d.rotate(90);break;case"flip-horizontal":d.scaleX(-g.scaleX||-1);break;case"flip-vertical":d.scaleY(-g.scaleY||-1);break;default:d.isPlayed&&d.stop()}},load:function(){var c=this,b=c.options,a=c.image,d=c.viewerData;c.timeout&&(clearTimeout(c.timeout),c.timeout=!1),ap(a,bv),a.style.cssText="width:0;height:0;margin-left:"+d.width/2+"px;margin-top:"+d.height/2+"px;max-width:none!important;visibility:visible;",c.initImage(function(){aq(a,aL,b.transition),aq(a,aE,b.movable),c.renderImage(function(){c.isViewed=!0,bf(c.element,ad)})})},loadImage:function(g){var d=aY(g),c=d.target,j=c.parentNode,b=j.offsetWidth||30,h=j.offsetHeight||50,f=!!ao(c,"filled");az(c,function(m,i){var o=m/i,k=b,a=h;h*o>b?f?k=h*o:a=b/o:f?a=b/o:k=h*o,aM(c,{width:k,height:a,marginLeft:(b-k)/2,marginTop:(h-a)/2})})},resize:function(){var a=this;a.initContainer(),a.initViewer(),a.renderViewer(),a.renderList(),a.isViewed&&a.initImage(function(){a.renderImage()}),a.isPlayed&&aN(a5(a.player,"img"),function(b){aH(b,ba,at(a.loadImage,a),!0),bf(b,ba)})},wheel:function(f){var d=this,c=aY(f),g=Number(d.options.zoomRatio)||0.1,b=1;d.isViewed&&(a3(c),d.wheeling||(d.wheeling=!0,setTimeout(function(){d.wheeling=!1},50),c.deltaY?b=c.deltaY>0?1:-1:c.wheelDelta?b=-c.wheelDelta/120:c.detail&&(b=c.detail>0?1:-1),d.zoom(-b*g,!0,c)))},keydown:function(f){var d=this,c=aY(f),g=d.options,b=c.keyCode||c.which||c.charCode;if(d.isFulled&&g.keyboard){switch(b){case 27:d.isPlayed?d.stop():g.inline?d.isFulled&&d.exit():d.hide();break;case 32:d.isPlayed&&d.stop();break;case 37:d.prev();break;case 38:a3(c),d.zoom(g.zoomRatio,!0);break;case 39:d.next();break;case 40:a3(c),d.zoom(-g.zoomRatio,!0);break;case 48:case 49:(c.ctrlKey||c.shiftKey)&&(a3(c),d.toggle())}}},mousedown:function(h){var d,c,k=this,b=k.options,j=aY(h),g=b.movable?"move":!1,f=j.touches;if(k.isViewed){if(f){if(d=f.length,d>1){if(!b.zoomable||2!==d){return}c=f[1],k.startX2=c.pageX,k.startY2=c.pageY,g="zoom"}else{k.isSwitchable()&&(g="switch")}c=f[0]}g&&(a3(j),k.action=g,k.startX=c?c.pageX:j.pageX,k.startY=c?c.pageY:j.pageY)}},mousemove:function(h){var k,g,d=this,j=d.options,c=aY(h),b=d.action,m=d.image,f=c.touches;if(d.isViewed){if(f){if(k=f.length,k>1){if(!j.zoomable||2!==k){return}g=f[1],d.endX2=g.pageX,d.endY2=g.pageY}g=f[0]}b&&(a3(c),"move"===b&&j.transition&&aA(m,aL)&&ap(m,aL),d.endX=g?g.pageX:c.pageX,d.endY=g?g.pageY:c.pageY,d.change(c))}},mouseup:function(c){var b=this,a=aY(c),d=b.action;d&&(a3(a),"move"===d&&b.options.transition&&aT(b.image,aL),b.action=!1)},show:function(){var c,b=this,a=b.options,d=b.element;return a.inline||b.transitioning?b:(b.isBuilt||b.build(),c=b.viewer,aG(a.show)&&aH(d,bB,a.show,!0),bf(d,bB)===!1?b:(aT(b.body,aX),ap(c,bA),aH(d,bH,function(){b.view(b.target?aP(b.target,aQ(b.images)):b.index),b.target=!1},!0),a.transition?(b.transitioning=!0,aT(c,aL),aV(c),aH(c,bD,at(b.shown,b),!0),aT(c,bq)):(aT(c,bq),b.shown()),b))},hide:function(){var c=this,b=c.options,a=c.element,d=c.viewer;return b.inline||c.transitioning||!c.isShown?c:(aG(b.hide)&&aH(a,bu,b.hide,!0),bf(a,bu)===!1?c:(c.isViewed&&b.transition?(c.transitioning=!0,aH(c.image,bD,function(){aH(d,bD,at(c.hidden,c),!0),ap(d,bq)},!0),c.zoomTo(0,!1,!1,!0)):(ap(d,bq),c.hidden()),c))},view:function(h){var m,g,d,j,c,b=this,p=b.element,f=b.title,k=b.canvas;return h=Number(h)||0,!b.isShown||b.isPlayed||0>h||h>=b.length||b.isViewed&&h===b.index?b:bf(p,al)===!1?b:(g=b.items[h],d=a5(g,"img")[0],j=ao(d,"originalUrl"),c=d.getAttribute("alt"),m=a0.createElement("img"),m.src=j,m.alt=c,b.image=m,b.isViewed&&ap(b.items[b.index],bj),aT(g,bj),b.isViewed=!1,b.index=h,b.imageData=null,aT(k,bv),bt(k),bb(k,m),b.renderList(),bt(f),aH(p,ad,function(){var n=b.imageData,l=n.naturalWidth,a=n.naturalHeight;br(f,c+" ("+l+" × "+a+")")},!0),m.complete?b.load():(aH(m,ba,at(b.load,b),!0),b.timeout&&clearTimeout(b.timeout),b.timeout=setTimeout(function(){ap(m,bv),b.timeout=!1},1000)),b)},prev:function(){var a=this;return a.view(aj(a.index-1,0)),a},next:function(){var a=this;return a.view(af(a.index+1,a.length-1)),a},move:function(c,b){var a=this,d=a.imageData;return a.moveTo(aB(c)?c:d.left+Number(c),aB(b)?b:d.top+Number(b)),a
},moveTo:function(d,b){var a=this,f=a.imageData,c=!1;return aB(b)&&(b=d),d=Number(d),b=Number(b),a.isViewed&&!a.isPlayed&&a.options.movable&&(aU(d)&&(f.left=d,c=!0),aU(b)&&(f.top=b,c=!0),c&&a.renderImage()),a},zoom:function(f,d,c){var g=this,b=g.imageData;return f=Number(f),f=0>f?1/(1-f):1+f,g.zoomTo(b.width*f/b.naturalWidth,d,c),g},zoomTo:function(q,y,k,g){var b,a,z,j,x=this,w=x.options,v=0.01,h=100,p=x.imageData;return q=aj(0,q),aU(q)&&x.isViewed&&!x.isPlayed&&(g||w.zoomable)&&(g||(v=aj(v,w.minZoomRatio),h=af(h,w.maxZoomRatio),q=af(aj(q,v),h)),q>0.95&&1.05>q&&(q=1),b=p.naturalWidth*q,a=p.naturalHeight*q,k?(z=bn(x.viewer),j=k.touches?aZ(k.touches):{pageX:k.pageX,pageY:k.pageY},p.left-=(b-p.width)*((j.pageX-z.left-p.left)/p.width),p.top-=(a-p.height)*((j.pageY-z.top-p.top)/p.height)):(p.left-=(b-p.width)/2,p.top-=(a-p.height)/2),p.width=b,p.height=a,p.ratio=q,x.renderImage(),y&&x.tooltip()),x},rotate:function(b){var a=this;return a.rotateTo((a.imageData.rotate||0)+Number(b)),a},rotateTo:function(c){var b=this,a=b.imageData;return c=Number(c),aU(c)&&b.isViewed&&!b.isPlayed&&b.options.rotatable&&(a.rotate=c,b.renderImage()),b},scale:function(d,b){var a=this,f=a.imageData,c=!1;return aB(b)&&(b=d),d=Number(d),b=Number(b),a.isViewed&&!a.isPlayed&&a.options.scalable&&(aU(d)&&(f.scaleX=d,c=!0),aU(b)&&(f.scaleY=b,c=!0),c&&a.renderImage()),a},scaleX:function(b){var a=this;return a.scale(b,a.imageData.scaleY),a},scaleY:function(b){var a=this;return a.scale(a.imageData.scaleX,b),a},play:function(){var g,c=this,b=c.options,j=c.player,h=at(c.loadImage,c),f=[],d=0,a=0;return !c.isShown||c.isPlayed?c:(b.fullscreen&&c.requestFullscreen(),c.isPlayed=!0,aT(j,bg),aN(c.items,function(m,l){var i=a5(m,"img")[0],k=a0.createElement("img");k.src=ao(i,"originalUrl"),k.alt=i.getAttribute("alt"),d++,aT(k,ac),aq(k,aL,b.transition),aA(m,bj)&&(aT(k,bq),a=l),f.push(k),aH(k,ba,h,!0),bb(j,k)}),aU(b.interval)&&b.interval>0&&(g=function(){c.playing=setTimeout(function(){ap(f[a],bq),a++,a=d>a?a:0,aT(f[a],bq),g()},b.interval)},d>1&&g()),c)},stop:function(){var b=this,a=b.player;return b.isPlayed?(b.options.fullscreen&&b.exitFullscreen(),b.isPlayed=!1,clearTimeout(b.playing),ap(a,bg),bt(a),b):b},full:function(){var f=this,d=f.options,c=f.viewer,g=f.image,b=f.list;return !f.isShown||f.isPlayed||f.isFulled||!d.inline?f:(f.isFulled=!0,aT(f.body,aX),aT(f.button,by),d.transition&&(ap(g,aL),ap(b,aL)),aT(c,a2),c.setAttribute("style",""),aM(c,{zIndex:d.zIndex}),f.initContainer(),f.viewerData=aK({},f.containerData),f.renderList(),f.initImage(function(){f.renderImage(function(){d.transition&&setTimeout(function(){aT(g,aL),aT(b,aL)},0)})}),f)},exit:function(){var f=this,d=f.options,c=f.viewer,g=f.image,b=f.list;return f.isFulled?(f.isFulled=!1,ap(f.body,aX),ap(f.button,by),d.transition&&(ap(g,aL),ap(b,aL)),ap(c,a2),aM(c,{zIndex:d.zIndexInline}),f.viewerData=aK({},f.parentData),f.renderViewer(),f.renderList(),f.initImage(function(){f.renderImage(function(){d.transition&&setTimeout(function(){aT(g,aL),aT(b,aL)},0)})}),f):f},tooltip:function(){var c=this,b=c.options,a=c.tooltipBox,d=c.imageData;return c.isViewed&&!c.isPlayed&&b.tooltip?(br(a,bz(100*d.ratio)+"%"),c.tooltiping?clearTimeout(c.tooltiping):b.transition?(c.fading&&bf(a,bD),aT(a,bg),aT(a,ac),aT(a,aL),aV(a),aT(a,bq)):aT(a,bg),c.tooltiping=setTimeout(function(){b.transition?(aH(a,bD,function(){ap(a,bg),ap(a,ac),ap(a,aL),c.fading=!1},!0),ap(a,bq),c.fading=!0):ap(a,bg),c.tooltiping=!1},1000),c):c},toggle:function(){var a=this;return 1===a.imageData.ratio?a.zoomTo(a.initialImageData.ratio,!0):a.zoomTo(1,!0),a},reset:function(){var a=this;return a.isViewed&&!a.isPlayed&&(a.imageData=aK({},a.initialImageData),a.renderImage()),a},update:function(){var c,b=this,a=[];return b.isImg&&!b.element.parentNode?b.destroy():(b.length=b.images.length,b.isBuilt&&(aN(b.items,function(f,h){var d=a5(f,"img")[0],g=b.images[h];g?g.src!==d.src&&a.push(h):a.push(h)}),aM(b.list,{width:"auto"}),b.initList(),b.isShown&&(b.length?b.isViewed&&(c=aP(b.index,a),c>=0?(b.isViewed=!1,b.view(aj(b.index-(c+1),0))):aT(b.items[b.index],bj)):(b.image=null,b.isViewed=!1,b.index=0,b.imageData=null,bt(b.canvas),bt(b.title)))),b)},destroy:function(){var b=this,a=b.element;return b.options.inline?b.unbind():(b.isShown&&b.unbind(),bi(a,bw,b._start)),b.unbuild(),bo(a,aI),b},shown:function(){var c=this,b=c.options,a=c.element;c.transitioning=!1,c.isFulled=!0,c.isShown=!0,c.isVisible=!0,c.render(),c.bind(),aG(b.shown)&&aH(a,bH,b.shown,!0),bf(a,bH)},hidden:function(){var c=this,b=c.options,a=c.element;c.transitioning=!1,c.isViewed=!1,c.isFulled=!1,c.isShown=!1,c.isVisible=!1,c.unbind(),ap(c.body,aX),aT(c.viewer,bA),c.resetList(),c.resetImage(),aG(b.hidden)&&aH(a,aF,b.hidden,!0),bf(a,aF)},requestFullscreen:function(){var b=this,a=a0.documentElement;!b.isFulled||a0.fullscreenElement||a0.mozFullScreenElement||a0.webkitFullscreenElement||a0.msFullscreenElement||(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))
},exitFullscreen:function(){var a=this;a.isFulled&&(a0.exitFullscreen?a0.exitFullscreen():a0.msExitFullscreen?a0.msExitFullscreen():a0.mozCancelFullScreen?a0.mozCancelFullScreen():a0.webkitExitFullscreen&&a0.webkitExitFullscreen())},change:function(c){var b=this,a=b.endX-b.startX,d=b.endY-b.startY;switch(b.action){case"move":b.move(a,d);break;case"zoom":b.zoom(function(j,h,g,l){var f=aW(j*j+h*h),k=aW(g*g+l*l);return(k-f)/f}(bI(b.startX-b.startX2),bI(b.startY-b.startY2),bI(b.endX-b.endX2),bI(b.endY-b.endY2)),!1,c),b.startX2=b.endX2,b.startY2=b.endY2;break;case"switch":b.action="switched",bI(a)>bI(d)&&(a>1?b.prev():-1>a&&b.next())}b.startX=b.endX,b.startY=b.endY},isSwitchable:function(){var c=this,b=c.imageData,a=c.viewerData;return b.left>=0&&b.top>=0&&b.width<=a.width&&b.height<=a.height}},a9.DEFAULTS={inline:!1,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,interval:5000,minWidth:200,minHeight:100,zoomRatio:0.1,minZoomRatio:0.01,maxZoomRatio:100,zIndex:9999999,zIndexInline:0,url:"src",build:null,built:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null},a9.TEMPLATE='<div class="viewer-container"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><ul class="viewer-toolbar"><li class="viewer-zoom-in" data-action="zoom-in"></li><li class="viewer-zoom-out" data-action="zoom-out"></li><li class="viewer-one-to-one" data-action="one-to-one"></li><li class="viewer-reset" data-action="reset"></li><li class="viewer-prev" data-action="prev"></li><li class="viewer-play" data-action="play"></li><li class="viewer-next" data-action="next"></li><li class="viewer-rotate-left" data-action="rotate-left"></li><li class="viewer-rotate-right" data-action="rotate-right"></li><li class="viewer-flip-horizontal" data-action="flip-horizontal"></li><li class="viewer-flip-vertical" data-action="flip-vertical"></li></ul><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div class="viewer-button" data-action="mix"></div><div class="viewer-player"></div></div>';var ai=aO.Viewer;return a9.noConflict=function(){return aO.Viewer=ai,a9},a9.setDefaults=function(a){aK(a9.DEFAULTS,a)},"function"==typeof define&&define.amd&&define("viewer",[],function(){return a9}),av||(aO.Viewer=a9),a9});